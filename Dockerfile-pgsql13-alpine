# $Id: Dockerfile-pgsql13-alpine 408 2021-07-05 17:48:01Z bpahlawa $
# $Author: bpahlawa $
# Created: 26-APR-2021
# Modified by: bpahlawa
# $Date: 2021-07-06 01:48:01 +0800 (Tue, 06 Jul 2021) $
# $Revision: 408 $
#
# Run as PRIMARY
# docker run -it --net host --name pgsql13 -e PRIMARYDB=yes -e RUNETCD=yes -e INITETCD=yes -e INITDB=yes -v /opt/pgsql13:/var/lib/postgresql postgresql13
#
# Run as REPLICA, if the container run on the same host then choose db port other than 5432
# docker run -it --net host --name pgsql13repl -e MEMBERNAME=member_2 -e INITDB=yes -e DBIPADDRPORT=$(hostname -i):5431 -e RESTIPADDRPORT=$(hostname -i):8002 -v /opt/pgsql13-2:/var/lib/postgresql postgresql13
#
# Run as REPLICA on different node, the etcd IP address must be pointed correctly
# docker run -it --net host --name pgsql13repl -e MEMBERNAME=member_3 -e INITDB=yes -e ETCDIPPORT1="192.168.0.158:2379" -v /opt/pgsql13-2:/var/lib/postgresql postgresql13
#
# add entrypoint.sh in base64 to Dockerfile
# echo -e "RUN echo \"$(cat patroni.env | base64 -w0)\" | base64 -d > /usr/local/bin/patroni.env\nRUN chmod ugo+x /usr/local/bin/patroni.env" >> Dockerfile-pgsql13-alpine
# echo -e "RUN echo \"$(cat entry-patroni-alpine.sh | base64 -w0)\" | base64 -d > /usr/local/bin/entry-patroni-alpine.sh\nRUN chmod ugo+x /usr/local/bin/entry-patroni-alpine.sh\nENTRYPOINT [\"/usr/local/bin/entry-patroni-alpine.sh\"]" >> Dockerfile-pgsql13-alpine

# docker build --tag postgresql13 -f ./Dockerfile-pgsql13-alpine /mnt

FROM jsimonetti/alpine-edge:latest
MAINTAINER brpahlaw

WORKDIR /usr/local/bin
RUN apk update
RUN apk upgrade
RUN echo "https://dl-cdn.alpinelinux.org/alpine/edge/testing" >> /etc/apk/repositories
RUN apk add postgresql postgresql-dev
RUN apk add gcc make python3 python3-dev py3-pip musl-dev linux-headers musl-locales musl-locales-lang
RUN pip install patroni
RUN pip install psycopg2-binary python-etcd
RUN apk add etcd
RUN mkdir -p /var/lib/postgresql/data
RUN mkdir -p /run/postgresql
RUN chown -R postgres:postgres /var/lib/postgresql  /run/postgresql
RUN echo "IyEvYmluL2Jhc2gKIyAkSWQ6IGVudHJ5LXBhdHJvbmktYWxwaW5lLnNoIDI0OSAyMDIwLTAzLTE5IDEzOjA5OjM1WiBicGFobGF3YSAkCiMgQ3JlYXRlZCAwNS1NQVItMjAxOQojICRBdXRob3I6IGJwYWhsYXdhICQKIyAkRGF0ZTogMjAyMC0wMy0xOSAyMTowOTozNSArMDgwMCAoVGh1LCAxOSBNYXIgMjAyMCkgJAojICRSZXZpc2lvbjogMjQ5ICQKIyAKCiNldGNkIGlwIGFkZHJlc3MgYW5kIHBvcnQgc2VwYXJhdGVkIGJ5IGNvbW1hCmV4cG9ydCBFVENESVBQT1JUMT0ke0VUQ0RJUFBPUlQxOi0iJChob3N0bmFtZSAtaSk6MjM3OSJ9CmV4cG9ydCBFVENESVBQT1JUMj0ke0VUQ0RJUFBPUlQyOi0iJChob3N0bmFtZSAtaSk6MjM4MSJ9ICAKZXhwb3J0IERCSVBBRERSUE9SVD0ke0RCSVBBRERSUE9SVDotIiQoaG9zdG5hbWUgLWkpOjU0MzIifQpleHBvcnQgTUVNQkVSTkFNRT0ke01FTUJFUk5BTUU6LSJtZW1iZXIxIn0KZXhwb3J0IFJFU1RJUEFERFJQT1JUPSR7UkVTVElQQUREUlBPUlQ6LSIkKGhvc3RuYW1lIC1pKTo4MDAxIn0gIApleHBvcnQgQ0xVU1RFUk5BTUU9JHtDTFVTVEVSTkFNRTotInBnc3FsMTMifQpleHBvcnQgSU5JVERCPSR7SU5JVERCOi0ibm8ifQpleHBvcnQgUE9TVEdSRVNQQVNTPSR7UE9TVEdSRVNQQVNTOi0icGFzc3dvcmQifQpleHBvcnQgUkVQTElDQVBBU1M9JHtSRVBMSUNBUEFTUzotInBhc3N3b3JkIn0KZXhwb3J0IFJFUExJQ0FVU0VSPSR7UkVQTElDQVVTRVI6LSJyZXBsaWNhdG9yIn0KZXhwb3J0IERBVEFESVI9JHtEQVRBRElSOi0iL3Zhci9saWIvcG9zdGdyZXNxbC9kYXRhIn0KZXhwb3J0IEVUQ0RNQUlORElSPSR7RVRDRE1BSU5ESVI6LSIkREFUQURJUi8uLi9ldGNkIn0KZXhwb3J0IEVUQ0RDT05GSUc9JHtFVENEQ09ORklHOi0iJHtFVENETUFJTkRJUn0vY29uZi55bWwifQpleHBvcnQgSU5JVEVUQ0Q9JHtJTklURVRDRDo9Im5vIn0KZXhwb3J0IFJVTkVUQ0Q9JHtSVU5FVENEOi0ibm8ifQpleHBvcnQgUFJJTUFSWURCPSR7UFJJTUFSWURCOi0ibm8ifQo=" | base64 -d > /usr/local/bin/patroni.env
RUN chmod ugo+x /usr/local/bin/patroni.env
RUN echo "IyEvYmluL2FzaAojICRJZDogZW50cnktcGF0cm9uaS1hbHBpbmUuc2ggNDA2IDIwMjEtMDctMDUgMTc6Mjg6MzdaIGJwYWhsYXdhICQKIyBDcmVhdGVkIDA1LU1BUi0yMDE5CiMgJEF1dGhvcjogYnBhaGxhd2EgJAojICREYXRlOiAyMDIxLTA3LTA2IDAxOjI4OjM3ICswODAwIChUdWUsIDA2IEp1bCAyMDIxKSAkCiMgJFJldmlzaW9uOiA0MDYgJAojfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fgoKc291cmNlIHBhdHJvbmkuZW52ClBBVFJPTkk9L3Vzci9iaW4vcGF0cm9uaQoKaXNfZXRjZF9ydW5uaW5nKCkKewogICBpZiBbICQocHMgLWVmIHwgZ3JlcCAiZXRjZC4qY29uZi55bWwiIHwgZ3JlcCAtdiBncmVwIHwgd2MgLWwpIC1uZSAwIF0KICAgdGhlbgogICAgICAgZWNobyAwCiAgIGVsc2UKICAgICAgIGVjaG8gMQogICBmaQp9CgpraWxsX2V0Y2QoKQp7CiAgUElEPSQocHMgLWVvIHBpZCxhcmdzIHwgZ3JlcCAiZXRjZC4qY29uZi55bWwiIHwgZ3JlcCAtdiBncmVwIHwgYXdrICd7cHJpbnQgJDF9JykKICBbWyAiJFBJRCIgIT0gIiIgXV0gJiYga2lsbCAtOSAkUElECn0KCgpbWyAkKGlzX2V0Y2RfcnVubmluZykgLWVxIDAgXV0gJiYga2lsbF9ldGNkCgppZiBbWyAiJFJVTkVUQ0QiID0gInllcyIgXV0KdGhlbgogICBbWyAiJElOSVRFVENEIiA9ICJ5ZXMiIF1dICYmIFtbIC1kICRFVENETUFJTkRJUiBdXSAmJiBybSAtcmYgJEVUQ0RNQUlORElSLyoKICAgW1sgISAtZCAkRVRDRE1BSU5ESVIgXV0gJiYgbWtkaXIgLXAgJEVUQ0RNQUlORElSCiAgIGVjaG8gIlJ1bm5pbmcgZXRjZCBkYWVtb24gaW4gYSBiYWNrZ3JvdW5kLi4uIgogICBpZiBbWyAhIC1mICIkRVRDRE1BSU5ESVIvY29uZi55bWwiIF1dCiAgIHRoZW4KICAgICAgW1sgISAtZCAkRVRDRE1BSU5ESVIvZGF0YSBdXSAmJiBta2RpciAtcCAkRVRDRE1BSU5ESVIvZGF0YSAmJiBjaG1vZCBnby1yd3ggJEVUQ0RNQUlORElSL2RhdGEKICAgICAgZWNobyAiUnVubmluZyBldGNkIHRlbXBvcmFyaWx5Li4uIgogICAgICBzZWQgInN8XCheZGF0YS1kaXI6IFwpLip8XDEgJEVUQ0RNQUlORElSL2RhdGF8ZyIgL2V0Yy9ldGNkL2NvbmYueW1sID4gJEVUQ0RNQUlORElSL2NvbmYueW1sCiAgICAgIGV0Y2QgLS1jb25maWctZmlsZSAkRVRDRE1BSU5ESVIvY29uZi55bWwgJgogICAgICBzbGVlcCA1CiAgICAgIENVUlJIT1NUPSQoaG9zdG5hbWUgLWkpCiAgICAgIFtbICQoaXNfZXRjZF9ydW5uaW5nKSAtbmUgMCBdXSAmJiBlY2hvICJldGNkIGZhaWxlZCB0byBzdGFydC4uLnBsZWFzZSBjaGVjayB0aGUgY29uZmlnIGZpbGUgb24gJEVUQ0RNQUlORElSL2NvbmYueW1sIiAmJiBleGl0IDEKICAgICAgZWNobyAiU2h1dGRvd24gZXRjZC4uLiIKICAgICAga2lsbF9ldGNkCiAgICAgIHNlZCAtaSAic3xcKGluaXRpYWwtYWR2ZXJ0aXNlLXBlZXItdXJsczogXCkuKnxcMSBodHRwOi8vJHtDVVJSSE9TVH06MjM4MHxnOyBzfFwoYWR2ZXJ0aXNlLWNsaWVudC11cmxzOiBcKS4qfFwxIGh0dHA6Ly8ke0NVUlJIT1NUfToyMzc5fGciICRFVENETUFJTkRJUi9jb25mLnltbAogICAgICBzZWQgLWkgInN8bG9jYWxob3N0fDAuMC4wLjB8ZyIgJEVUQ0RNQUlORElSL2NvbmYueW1sCiAgIGZpCiAgIHNsZWVwIDEwCiAgIGVjaG8gLWUgIlxuXG5SdW5uaW5nIGV0Y2QuLi4uIgogICBldGNkIC0tY29uZmlnLWZpbGUgJEVUQ0RNQUlORElSL2NvbmYueW1sICYKICAgCmVsc2UKICAgZWNobyAiZXRjZCBkYWVtb24gd2lsbCBub3QgYmUgcnVubmluZyBmcm9tIHRoaXMgY29udGFpbmVyL3NlcnZlciAhISIKZmkKCiNbWyBgd2hvYW1pYCA9ICJyb290IiBdXSAmJiBlY2hvICJSdW4gYXMgcm9vdCBpcyBub3QgYWxsb3dlZCwgZXhpdGluZy4uLi4iICYmIGV4aXQgMQoKaWYgW1sgIiREQklQQUREUlBPUlQiICE9ICIiIF1dIAp0aGVuCiAgIFBHU1FMUE9SVD0kKGVjaG8gJHtEQklQQUREUlBPUlR9IHwgY3V0IC1mMiAtZDopIAogICBORVRXT1JLPSQoZWNobyAke0RCSVBBRERSUE9SVH0gfCBjdXQgLWYxLTMgLWQiLiIpCiAgIFBHU1FMSVBBRERSPSQoZWNobyAke0RCSVBBRERSUE9SVH0gfCBjdXQgLWYxIC1kOikKZmkKCmlmIFtbICIkUkVTVElQQUREUlBPUlQiICE9ICIiIF1dCnRoZW4KICAgUkVTVElQQUREUj0kKGVjaG8gJHtSRVNUSVBBRERSUE9SVH0gfCBjdXQgLWYxIC1kOikKICAgUkVTVFBPUlQ9JChlY2hvICR7UkVTVElQQUREUlBPUlR9IHwgY3V0IC1mMiAtZDopCmZpCgpbWyAhIC1kICREQVRBRElSIF1dICYmIG1rZGlyIC1wICREQVRBRElSIApjaG93biAtUiBwb3N0Z3Jlczpwb3N0Z3JlcyAkREFUQURJUi8uLgpjaG1vZCAwNzAwICREQVRBRElSCgppZiBbWyAiJElOSVREQiIgPSAieWVzIiB8fCAkKGxzIC14ICREQVRBRElSIDI+L2Rldi9udWxsIHwgd2MgLWwpIC1lcSAwIF1dCnRoZW4KCiAgIFtbIC1kICREQVRBRElSIF1dICYmIHJtIC1yZiAkREFUQURJUi8qIDI+L2Rldi9udWxsICYmIHJtIC1yZiAkREFUQURJUi8uKiAyPi9kZXYvbnVsbAogICBjaG1vZCAtUiAwNzAwICREQVRBRElSCgogICBpZiBbWyAiJFBSSU1BUllEQiIgPSAieWVzIiBdXQogICB0aGVuCiAgICAgIFtbICIkUkVQTElDQVBBU1MiID0gIiIgfHwgIiRQT1NUR1JFU1BBU1MiID0gIiIgXV0gJiYgZWNobyAiUmVwbGljYXRvciBhbmQgUG9zdGdyZXMgcGFzc3dvcmQgbXVzdCBiZSBzcGVjaWZpZWQgYWZ0ZXIgaW5pdGRiLi4uIiAmJiBlY2hvICIuLi4uaW5pdGRiIFJFUExJQ0FQQVNTIFBPU1RHUkVTUEFTUyIgJiYgZXhpdCAxCiAgICAgIGVjaG8gImluaXRpYWxpemluZyBQcmltYXJ5IGRhdGFiYXNlLi4uLiIKICAgICAgc3UgLSBwb3N0Z3JlcyAtYyAiCi91c3IvYmluL2luaXRkYiAtRCAkREFUQURJUgplY2hvIC1lIFwicGFzc3dkOiR7UkVQTElDQVBBU1N9OiR7UE9TVEdSRVNQQVNTfVwiID4gJERBVEFESVIvLnBncGFzc3dkCnNlZCAtaSBcInMvI3BvcnQuKj0uKjU0MzIvcG9ydCA9ICR7UEdTUUxQT1JUfS9nXCIgJERBVEFESVIvcG9zdGdyZXNxbC5jb25mCnNlZCAtaSBcInMvI2xpc3Rlbl9hZGRyZXNzZXMgPSAnbG9jYWxob3N0Jy9saXN0ZW5fYWRkcmVzc2VzID0gJyonL2dcIiAkREFUQURJUi9wb3N0Z3Jlc3FsLmNvbmYKCmlmIFsgXGBncmVwIFwiaG9zdC4qYWxsLiphbGwuKjBcLjBcLjBcLjAuKlwiICREQVRBRElSL3BnX2hiYS5jb25mIHwgd2MgLWxcYCAtZXEgMCBdCnRoZW4KICAgZWNobyBcImhvc3QgICAgYWxsICAgICAgICAgICBhbGwgICAgICAgICAgICAgMC4wLjAuMC8wICAgICAgICAgICAgICAgICBtZDVcIiA+PiAkREFUQURJUi9wZ19oYmEuY29uZgogICBlY2hvIFwiaG9zdCAgICByZXBsaWNhdGlvbiAgIGFsbCAgICAgICAgICAgICAke05FVFdPUkt9LjAvMjQgICAgICAgICAgdHJ1c3RcIiA+PiAkREFUQURJUi9wZ19oYmEuY29uZiAKZmkKL3Vzci9iaW4vcG9zdGdyZXMgLUQgJERBVEFESVIgJgpzbGVlcCA1CmVjaG8gXCJjcmVhdGUgdXNlciByZXBsaWNhdG9yXCIKZWNobyBcImNyZWF0ZSB1c2VyIHJlcGxpY2F0b3Igd2l0aCBwYXNzd29yZCAnJHtSRVBMSUNBUEFTU30nIGxvZ2luIHJlcGxpY2F0aW9uO1wiIHwgcHNxbCAtaCBsb2NhbGhvc3QgLXAgJHtQR1NRTFBPUlR9CmVjaG8gXCJTZXR0aW5nIHVwIHBhc3N3b3JkIGZvciBwb3N0cmVzIHVzZXJcIgplY2hvIFwiYWx0ZXIgdXNlciBwb3N0Z3JlcyB3aXRoIHBhc3N3b3JkICcke1BPU1RHUkVTUEFTU30nO1wiIHwgcHNxbCAtaCBsb2NhbGhvc3QgLXAgJHtQR1NRTFBPUlR9CnNsZWVwIDUKa2lsbCAlMQpzbGVlcCAxMAoiCiAgZWxzZQogICAgIGlmIFtbICIkUFJJTUFSWURCIiAhPSAieWVzIiBdXQogICAgIHRoZW4KICAgICAgICBlY2hvICJDcmVhdGluZyByZXBsaWNhIGRhdGFiYXNlIGZyb20gUHJpbWFyeSBkYXRhYmFzZS4uLi4iCiAgICAgZWxzZQogICAgICAgIGVjaG8gIlN0YXJ0aW5nIHVwIFByaW1hcnkgRGF0YWJhc2UuLi4uIgogICAgIGZpCiAgZmkKZWxzZQogICBbWyAiJFJFUExJQ0FQQVNTIiA9ICIiIF1dICYmIFJFUExJQ0FQQVNTPWBncmVwIHBhc3N3ZCAkREFUQURJUi8ucGdwYXNzd2QgfCBjdXQgLWYyIC1kIjoiYAogICBbWyAiJFBPU1RHUkVTUEFTUyIgPSAiIiBdXSAmJiBQT1NUR1JFU1BBU1M9YGdyZXAgcGFzc3dkICREQVRBRElSLy5wZ3Bhc3N3ZCB8IGN1dCAtZjMgLWQiOiJgCmZpCgpbWyAiJEVUQ0RJUFBPUlQxIiA9ICIiICAmJiAgIiRFVENESVBQT1JUMiIgPSAiIiBdXSAmJiBlY2hvICJQYXRyb25pIHJlcXVpcmVzIGV0Y2QgSVAgYWRkcmVzcyBhbmQgaXRzIHBvcnQiICYmIGV4aXQgMQoKaWYgWyAiJEVUQ0RJUFBPUlQxIiAhPSAiIiBdCnRoZW4KICAgIEVUQ0RJUEFERFJQT1JUPSIkRVRDRElQUE9SVDEiCiAgICBpZiBbICIkRVRDRElQUE9SVDIiICE9ICIiIF0KICAgIHRoZW4KICAgICAgICBFVENESVBBRERSUE9SVD0iJHtFVENESVBBRERSUE9SVH0sJEVUQ0RJUFBPUlQyIgogICAgZmkKZWxzZQogICAgaWYgWyAiJEVUQ0RJUFBPUlQyIiAhPSAiIiBdCiAgICB0aGVuCiAgICAgICAgRVRDRElQQUREUlBPUlQ9IiRFVENESVBQT1JUMiIKICAgIGZpCmZpICAgICAgICAKCgpzdSAtIHBvc3RncmVzIC1jICIKZXhwb3J0IFBBVFJPTklfQ09ORklHVVJBVElPTj1cInNjb3BlOiAke0NMVVNURVJOQU1FfQpuYW1lOiAke01FTUJFUk5BTUV9CgpyZXN0YXBpOgogIGxpc3RlbjogMC4wLjAuMDoke1JFU1RQT1JUfQogIGNvbm5lY3RfYWRkcmVzczogMTI3LjAuMC4xOiR7UkVTVFBPUlR9CgpldGNkOgogIGhvc3RzOiAke0VUQ0RJUEFERFJQT1JUfQogIHByb3RvY29sOiBodHRwCgpib290c3RyYXA6CiAgZGNzOgogICAgdHRsOiAzMAogICAgbG9vcF93YWl0OiAxMAogICAgcmV0cnlfdGltZW91dCA6IDEwCiAgICBtYXhpbXVtX2xhZ19vbl9mYWlsb3ZlcjogMTA0ODU3NgogICAgcG9zdGdyZXNxbDoKICAgICAgdXNlX3BnX3Jld2luZDogdHJ1ZQogICAgICB1c2Vfc2xvdHM6IHRydWUKICAgICAgcGFyYW1ldGVyczoKICAgICAgICB3YWxfa2VlcF9zZWdtZW50czogMTAwCgogIGluaXRkYjoKICAtIGVuY29kaW5nOiBVVEY4CiAgLSBkYXRhLWNoZWNrc3VtcwoKICBwZ19oYmE6CiAgLSBob3N0IHJlcGxpY2F0aW9uIHJlcGxpY2F0b3IgMC4wLjAuMC8wIG1kNQogIC0gaG9zdCBhbGwgYWxsIDAuMC4wLjAvMCBtZDUKCgpwb3N0Z3Jlc3FsOgogIGxpc3RlbjogMC4wLjAuMDoke1BHU1FMUE9SVH0KICBjb25uZWN0X2FkZHJlc3M6ICR7UEdTUUxJUEFERFJ9IAogIGRhdGFfZGlyOiAke0RBVEFESVJ9CiAgYmluX2RpcjogL3Vzci9iaW4KICBhdXRoZW50aWNhdGlvbjoKICAgIHJlcGxpY2F0aW9uOgogICAgICB1c2VybmFtZTogJHtSRVBMSUNBVVNFUn0KICAgICAgcGFzc3dvcmQ6ICR7UkVQTElDQVBBU1N9CiAgICBzdXBlcnVzZXI6CiAgICAgIHVzZXJuYW1lOiBwb3N0Z3JlcwogICAgICBwYXNzd29yZDogJHtQT1NUR1JFU1BBU1N9CiAgcGdfaGJhOgogIC0gbG9jYWwgICBhbGwgICAgICAgICAgICAgYWxsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydXN0CiAgLSBob3N0ICAgIGFsbCAgICAgICAgICAgICBhbGwgICAgICAgICAgICAgMTI3LjAuMC4xLzMyICAgICAgICAgICAgdHJ1c3QKICAtIGhvc3QgICAgYWxsICAgICAgICAgICAgIGFsbCAgICAgICAgICAgICA6OjEvMTI4ICAgICAgICAgICAgICAgICB0cnVzdAogIC0gbG9jYWwgICByZXBsaWNhdGlvbiAgICAgYWxsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydXN0CiAgLSBob3N0ICAgIHJlcGxpY2F0aW9uICAgICBhbGwgICAgICAgICAgICAgMTI3LjAuMC4xLzMyICAgICAgICAgICAgdHJ1c3QKICAtIGhvc3QgICAgcmVwbGljYXRpb24gICAgIGFsbCAgICAgICAgICAgICA6OjEvMTI4ICAgICAgICAgICAgICAgICB0cnVzdAogIC0gaG9zdCByZXBsaWNhdGlvbiByZXBsaWNhdG9yIDAuMC4wLjAvMCBtZDUKICAtIGhvc3QgYWxsIGFsbCAwLjAuMC4wLzAgbWQ1XCIKCmlmIFtbIFwiJElOSVREQlwiID0gXCJ5ZXNcIiAmJiBcIiRQUklNQVJZREJcIiA9IFwieWVzXCIgXV0KdGhlbgogICBwYXRyb25pY3RsIHJlbW92ZSAkQ0xVU1RFUk5BTUUgPDwhCiRDTFVTVEVSTkFNRQpZZXMgSSBhbSBhd2FyZQohCmZpCgokUEFUUk9OSQoiCg==" | base64 -d > /usr/local/bin/entry-patroni-alpine.sh
RUN chmod ugo+x /usr/local/bin/entry-patroni-alpine.sh
ENTRYPOINT ["/usr/local/bin/entry-patroni-alpine.sh"]
